{% load socialaccount %}

<!DOCTYPE html>
<html>
<head>
    <title>Magnovite 2015</title>
    <link rel="shortcut icon" href="/static/img/msprite.png">

    <meta name="viewport" content="width=device-width, user-scalable=no">
    <meta charset="utf-8">

    <!-- build:css(./app/) /static/dist/style.css -->
    <link rel="stylesheet" href="/static/css/app.css" />
    <!-- endbuild -->

    <!-- build:js(./app/) /static/dist/js-head.js -->
        <script src="/static/js/lib/modernizer.js"></script>
    <!-- endbuild -->
</head>
<body class="{% block "body_css_class" %}{% endblock %}">
    {% csrf_token %}

    <!-- login modal -->
    <div class="login-modal modal" id="login-modal">
        <div class="modal-inner">
            <div class="close">x</div>

            <h2 class="title">Login or Register</h2>

            <div class="body">
                <div class="buttons">
                    <div class="social-button">
                        <img src="/static/img/google.png" alt="">
                        <a href="{% provider_login_url "google" %}"></a>
                    </div>
                    <div class="social-button">
                        <img src="/static/img/twitter.png" alt="">
                        <a href="{% provider_login_url "twitter" %}"></a>
                    </div>
                </div>
                <p class="help-text">
                    Why only Social Login? Because we dont want
                    you to have to remember another set of username/password.
                    Also we request only basic profile details
                </p>
            </div>
        </div>
    </div>

    {% block page_banner %}
    <div class="banner">
        <div class="banner-inner">
            <div class="user-settings
                {% if user.is_authenticated %}logged-in{% endif %}">

                {% if user.is_authenticated %}
                    <a class="text" href="#">Hi, <em>{{ profile.name }}</em></a>
                {% else %}
                    <a class="text" href="#">Login/Register</a>
                {% endif %}

                <ul class="dropdown user-dropdown">
                    <li><a href="/profile/">My Account</a></li>
                    <li><a href="/logout/">Logout</a></li>
                </ul>
            </div>
        </div>
    </div>
    {% endblock page_banner %}

    <div class="notifications">
        <script type="text/template" id="notification-template">
            <div data-id="[[id]]" class="notification [[type]] [[actionClass]]">
                <p class="close js-notif-close">x</p>

                <p class="text">[[text]]</p>
                <a href="#" class="action js-notif-action">[[action]]</a>
            </div>
        </script>
    </div>

    {% block "content" %}{% endblock %}

    {% block "pre_js" %}{% endblock %}

    <script>
    var app = {};

    if (!Modernizr.touch && window.innerWidth > 767) {
        document.body.classList.add('desktop');
        app.desktop = true;
    } else {
        document.body.classList.add('mobile');
        app.mobile = true;
    }
    </script>

    <!-- build:js(./app/) /static/dist/app.js -->

    <!-- Lib -->
        <script src="/static/js/lib/jquery-2.1.1.min.js"></script>
        <script src="/static/js/lib/nprogress.js"></script>
        <script src="/static/js/lib/countdown.js"></script>
        <script src="/static/js/lib/microajax.js"></script>
    <!-- /Lib -->

    <!-- common -->
        <script src="/static/js/common/modal.js"></script>
        <script src="/static/js/common/notification.js"></script>
        <script src="/static/js/common/settingsDropdown.js"></script>
        <script src="/static/js/common/csrfJquerySetup.js"></script>
        <script src="/static/js/common/compatibility.js"></script>
        <script src="/static/js/common/utils.js"></script>
    <!-- /Common -->

    <!-- HomePage -->
        <!-- takes care of scrolljacking as well as kicking off bulb anim -->
        <script src="/static/js/home/choreographer.js"></script>
        <script src="/static/js/home/bulb.js"></script>

        <script src="/static/js/home/timer.js"></script>

        <script src="/static/js/home/anim/data.js"></script>
        <script src="/static/js/home/anim/helpers/utils.js"></script>
        <script src="/static/js/home/anim/helpers/common.js"></script>
        <script src="/static/js/home/anim/objects/line.js"></script>
        <script src="/static/js/home/anim/objects/triangle.js"></script>
        <script src="/static/js/home/anim/objects/letter.js"></script>
        <script src="/static/js/home/anim/objects/atom.js"></script>

        <script src="/static/js/home/anim/game.js"></script>
        <script src="/static/js/home/anim/logo.js"></script>
        <script src="/static/js/home/anim/main.js"></script>

        <!-- handle subscribe form -->
        <script src="/static/js/home/subscribe.js"></script>
    <!-- /HomePage-->

    <!-- EventPage -->
        <script src="/static/js/event/events.js"></script>
    <!-- /EventPage -->

    <!-- Profile Page -->
        <script src="/static/js/profile/profile.js"></script>
    <!-- /Profile Page -->

    <!-- Event Details page -->
        <script src="/static/js/eventDetails/eventDetails.js"></script>
    <!-- /EventDetails -->

    <!-- endbuild -->

    {% block "post_js" %}{% endblock %}

    {# Show all the messages #}
    <script>
    {% for message in messages %}
        app.notification.notify({
            text: '{{message}}',
            type: '{{message.tags}}'
        });
    {% endfor %}
    </script>

</body>
</html>
